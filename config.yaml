# Multi-Camera Traffic Analysis Configuration

# Model Configuration
model:
  path: "models/best.pt"  # Path to your custom trained YOLOv8 model
  conf_threshold: 0.25    # Confidence threshold for detections
  iou_threshold: 0.45     # IoU threshold for NMS
  
# Camera Configuration
cameras:
  - id: 1
    name: "Camera 1"
    video_path: "data/videos/camera1.mp4"
    homography_matrix: "data/calibration/camera1_H.npy"
    enabled: true
    
  - id: 2
    name: "Camera 2"
    video_path: "data/videos/camera2.mp4"
    homography_matrix: "data/calibration/camera2_H.npy"
    enabled: true

# Global Map Configuration
global_map:
  image_path: "data/maps/global_map.jpg"  # Google Earth screenshot
  scale: 1.0  # meters per pixel (to be calibrated)
  
# Tracking Configuration
tracking:
  tracker_type: "bytetrack"
  track_buffer: 30        # Frames to keep lost tracks
  match_threshold: 0.8    # Matching threshold for ByteTrack
  min_box_area: 10        # Minimum bounding box area
  
# Fusion Configuration
fusion:
  distance_threshold: 2.0  # Meters - merge vehicles within this distance
  frame_window: 5          # Frames to look back for merging
  confidence_weight: 0.3   # Weight of confidence in fusion decision
  
# Analytics Configuration
analytics:
  csv_output: "output/traffic_data.csv"
  log_interval: 1          # Save to CSV every N frames
  zones: []                # List of polygon zones (defined at runtime)
  enable_heatmap: true
  heatmap_output: "output/heatmap.png"
  
# Visualization Configuration
visualization:
  display_global_map: true
  display_camera_feeds: true
  trajectory_length: 50    # Number of points to show in trajectory
  draw_zones: true
  point_size: 5
  line_thickness: 2
  font_scale: 0.5
  
# Class Names (adjust based on your trained model)
classes:
  0: "Car"
  1: "Bike"
  2: "Pedestrian"
  
# Colors for visualization (BGR format)
colors:
  Car: [0, 255, 0]        # Green
  Bike: [255, 0, 0]       # Blue
  Pedestrian: [0, 0, 255] # Red
  
# Performance Configuration
performance:
  frame_skip: 0           # Process every Nth frame (0 = no skip)
  resize_width: 1280      # Resize camera feeds for faster processing
  use_gpu: true
  
# Output Configuration
output:
  save_visualization: true
  output_video: "output/result.mp4"
  fps: 30
